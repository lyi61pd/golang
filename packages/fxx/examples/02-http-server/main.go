package httpserver
package main























































































































}	// æœåŠ¡å™¨ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æ”¶åˆ°åœæ­¢ä¿¡å·ï¼ˆCtrl+Cï¼‰	app.Run()	)		}),			// server å·²ç»é€šè¿‡ç”Ÿå‘½å‘¨æœŸé’©å­å¯åŠ¨		fx.Invoke(func(server *HTTPServer) {		),			NewHTTPServer,			NewHTTPHandler,			NewConfig,			NewSimpleLogger,		fx.Provide(	app := fx.New(	fmt.Println("=== fx HTTP æœåŠ¡å™¨ç¤ºä¾‹ ===\n")func main() {}	return httpServer	})		},			return srv.Shutdown(ctx)			logger.Log("â¹ï¸  å…³é—­ HTTP æœåŠ¡å™¨")		OnStop: func(ctx context.Context) error {		},			return nil			}()				}					logger.Log(fmt.Sprintf("âŒ HTTP æœåŠ¡å™¨é”™è¯¯: %v", err))				if err := srv.ListenAndServe(); err != nil && err != http.ErrServerClosed {			go func() {			logger.Log("   æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨")			logger.Log("   è®¿é—® http://localhost:8080")			logger.Log(fmt.Sprintf("ğŸš€ å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œç›‘å¬ç«¯å£ %s", config.Port))		OnStart: func(ctx context.Context) error {	lc.Append(fx.Hook{	// æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­	}		logger: logger,		server: srv,	httpServer := &HTTPServer{	}		Handler: handler,		Addr:    config.Port,	srv := &http.Server{func NewHTTPServer(lc fx.Lifecycle, config *Config, handler *HTTPHandler, logger Logger) *HTTPServer {}	logger Logger	server *http.Servertype HTTPServer struct {// HTTPServer å°è£… HTTP æœåŠ¡å™¨}	}		fmt.Fprintf(w, "404 Not Found\n")		w.WriteHeader(http.StatusNotFound)	default:		fmt.Fprintf(w, "å½“å‰æ—¶é—´: %s\n", time.Now().Format(time.RFC3339))	case "/time":		fmt.Fprintf(w, "OK\n")	case "/health":		fmt.Fprintf(w, "æ¬¢è¿ä½¿ç”¨ fx HTTP æœåŠ¡å™¨!\n")	case "/":	switch r.URL.Path {	h.logger.Log(fmt.Sprintf("æ”¶åˆ°è¯·æ±‚: %s %s", r.Method, r.URL.Path))func (h *HTTPHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {}	return &HTTPHandler{logger: logger}func NewHTTPHandler(logger Logger) *HTTPHandler {}	logger Loggertype HTTPHandler struct {// HTTPHandler å¤„ç† HTTP è¯·æ±‚}	}		Port: ":8080",	return &Config{func NewConfig() *Config {}	Port stringtype Config struct {// Config é…ç½®ç»“æ„}	fmt.Printf("[LOG] %s\n", message)func (l *SimpleLogger) Log(message string) {}	return &SimpleLogger{}func NewSimpleLogger() Logger {type SimpleLogger struct{}// SimpleLogger å®ç°}	Log(message string)type Logger interface {// Logger æ¥å£)	"go.uber.org/fx"	"time"	"net/http"	"fmt"	"context"import (